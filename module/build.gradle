plugins {
//    id 'com.github.johnrengelman.shadow' version '2.0.4'
    id 'java'
    id 'application'
    id 'maven-publish'
    id 'signing'
}

group 'com.annimon'
version '0.2'
ext.isReleaseVersion = !version.endsWith("SNAPSHOT")

mainClassName = 'com.annimon.telegrambots.Runner'
sourceCompatibility = 11

repositories {
    mavenCentral()
}

ext.retrofitVersion = '2.4.0'
ext.jacksonVersion = '2.9.7'
ext.junit5Version = '5.3.1'

dependencies {
    // runtimeOnly project(':testbot')
    compile 'org.telegram:telegrambots:4.1'
    compile "com.squareup.retrofit2:retrofit:$retrofitVersion"
    compile "com.squareup.retrofit2:converter-jackson:$retrofitVersion"
    compile "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:$jacksonVersion"
    compile "com.fasterxml.jackson.core:jackson-databind:$jacksonVersion"
    compile "com.fasterxml.jackson.module:jackson-module-kotlin:$jacksonVersion"
    compile 'org.hibernate:hibernate-validator:6.0.12.Final'
    compile 'org.glassfish:javax.el:3.0.1-b10'
    compile 'javax.xml.bind:jaxb-api:2.3.0'
    compile 'com.sun.xml.bind:jaxb-impl:2.3.0'
    compile 'org.glassfish.jaxb:jaxb-runtime:2.3.0'
    compile 'javax.activation:activation:1.1.1'
    compile 'org.jetbrains:annotations:16.0.3'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher:1.3.1'
    testImplementation "org.junit.jupiter:junit-jupiter-api:$junit5Version"
    testImplementation "org.junit.jupiter:junit-jupiter-params:$junit5Version"
    testImplementation "org.junit.jupiter:junit-jupiter-engine:$junit5Version"
    testImplementation "org.junit.vintage:junit-vintage-engine:$junit5Version"
    testImplementation 'org.hamcrest:hamcrest-library:1.3'
}

test {
    useJUnitPlatform()
}

//shadowJar {
//    mergeServiceFiles()
//    exclude 'META-INF/*.DSA'
//    exclude 'META-INF/*.RSA'
//}

if (isReleaseVersion) {
    apply from: 'signing.gradle'
}
